<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>è¨˜å¸³æœ¬</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- å·¦å´ï¼šæ–°å¢æ”¯å‡º -->
        <div class="left-panel">
            <h2>æ–°å¢æ”¯å‡º</h2>
            <form id="recordForm">
                <label for="date">æ—¥æœŸï¼š</label>
                <input type="date" id="date" required><br>

                <label for="category">é¡åˆ¥ï¼š</label>
                <input type="text" id="category" required><br>

                <label for="amount">é‡‘é¡ï¼š</label>
                <input type="number" id="amount" required><br>

                <label for="note">å‚™è¨»ï¼š</label>
                <input type="text" id="note"><br>

                <button type="submit">æ–°å¢ç´€éŒ„</button>
            </form>
        </div>

        <!-- å³å´ï¼šæ”¯å‡ºç´€éŒ„ -->
        <div class="right-panel">
            <h2>æ”¯å‡ºç´€éŒ„</h2>
            <div id="records"></div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        const recordForm = document.getElementById("recordForm");
        const recordsContainer = document.getElementById("records");

        let records = [];

        recordForm.addEventListener("submit", function (e) {
            e.preventDefault();

            const date = document.getElementById("date").value;
            const category = document.getElementById("category").value;
            const amount = parseFloat(document.getElementById("amount").value);
            const note = document.getElementById("note").value;

            if (!date || !category || isNaN(amount)) {
                alert("è«‹å®Œæ•´å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½ï¼");
                return;
            }

            const newRecord = { date, category, amount, note };
            records.push(newRecord);

            renderRecords();
            recordForm.reset();
        });

        function renderRecords() {
            const monthlyData = {};

            records.forEach(record => {
                const month = record.date.slice(0, 7); // yyyy-MM
                if (!monthlyData[month]) {
                    monthlyData[month] = { total: 0, items: [] };
                }
                monthlyData[month].total += record.amount;
                monthlyData[month].items.push(record);
            });

            const sortedMonths = Object.keys(monthlyData).sort((a, b) => b.localeCompare(a));

            recordsContainer.innerHTML = "";

            sortedMonths.forEach(month => {
                const section = document.createElement("div");
                section.className = "record";
                section.innerHTML = `<h3>${month} ç¸½æ”¯å‡ºï¼š$${monthlyData[month].total.toFixed(2)}</h3>`;

                monthlyData[month].items.forEach(record => {
                    const recordDiv = document.createElement("div");
                    recordDiv.innerHTML = `
                        <p>ğŸ“… ${record.date}ï½œğŸ“‚ ${record.category}ï½œğŸ’° $${record.amount}ï½œğŸ“ ${record.note}</p>
                    `;
                    section.appendChild(recordDiv);
                });

                recordsContainer.appendChild(section);
            });
        }
    </script>
</body>
</body>
</html>

